# Каталог сериалов

## Описание

Веб-приложение на FastAPI для хранения сериалов, жанров, сезонов и эпизодов.  
Реализована регистрация и авторизация пользователей, защищённые маршруты, а также расчёт среднего рейтинга сериалов по жанру.

---

## Как запустить?

1. Необходимо установить зависимости:

```
pip install -r requirements.txt
```
Запустить сервер:
```
uvicorn app.main:app --reload
```
Открыть в браузере:
http://127.0.0.1:8000/docs

По ссылке доступна Swagger-документация с тестированием API.

## Авторизация

### Зарегистрируйте пользователя:
```
POST /users/ — передайте email и password
```
### Получите токен:
```
POST /token — передайте username и password
```
В ответе будет access_token
### В интерфейсе Swagger нажмите "Authorize"
Вставьте токен в формате:
```
Bearer <токен> 
```
---
## Основные маршруты
| Метод | Эндпоинт                    | Описание                            |
| ----- | --------------------------- | ----------------------------------- |
| POST  | /users/                     | Регистрация                         |
| POST  | /token                      | Получить токен                      |
| GET   | /users/me/                  | Получить текущего пользователя      |
| POST  | /genres/                    | Создать жанр                        |
| GET   | /genres/                    | Получить все жанры                  |
| POST  | /series/                    | Создать сериал                      |
| GET   | /series/                    | Получить все сериалы                |
| GET   | /series/{id}                | Получить сериал по ID               |
| POST  | /series/{id}/seasons/       | Добавить сезон к сериалу            |
| POST  | /seasons/{id}/episodes/     | Добавить эпизод к сезону            |
| GET   | /genres/{id}/average-rating | ⭐ Средний рейтинг сериалов по жанру |
 
---

## Тесты

Чтобы запустить тесты:
```
PYTHONPATH=. pytest -s
```
---
## Список технологий

FastAPI
SQLAlchemy
SQLite
Pydantic
JWT авторизация
Pytest

---

## Автор
Евгения Беседина
